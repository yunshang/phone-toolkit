#!/bin/bash
# å¿«é€Ÿæ¼”ç¤ºè„šæœ¬ - å±•ç¤º uv çš„é€Ÿåº¦ä¼˜åŠ¿

echo "======================================"
echo "ğŸ“Š uv vs pip æ€§èƒ½å¯¹æ¯”æ¼”ç¤º"
echo "======================================"
echo ""

# æ£€æŸ¥ uv
if ! command -v uv &> /dev/null; then
    echo "âš ï¸  uv æœªå®‰è£…ï¼Œè¯·å…ˆè¿è¡Œ: curl -LsSf https://astral.sh/uv/install.sh | sh"
    exit 1
fi

# æ¸…ç†æ—§ç¯å¢ƒ
echo "ğŸ§¹ æ¸…ç†æ—§ç¯å¢ƒ..."
rm -rf .venv-pip .venv-uv

echo ""
echo "============================================"
echo "æµ‹è¯• 1: ä½¿ç”¨ pip åˆ›å»ºç¯å¢ƒå¹¶å®‰è£…ä¾èµ–"
echo "============================================"
time {
    python -m venv .venv-pip
    .venv-pip/bin/pip install -q -e ".[dev]"
}

echo ""
echo "============================================"
echo "æµ‹è¯• 2: ä½¿ç”¨ uv åˆ›å»ºç¯å¢ƒå¹¶å®‰è£…ä¾èµ–"
echo "============================================"
time {
    uv venv .venv-uv
    uv pip install -q -e ".[dev]"
}

echo ""
echo "============================================"
echo "ğŸ“ˆ ç»“æœå¯¹æ¯”"
echo "============================================"
echo "æŸ¥çœ‹ä¸Šé¢çš„ 'real' æ—¶é—´æ¯”è¾ƒ"
echo "é€šå¸¸ uv æ¯” pip å¿« 10-15 å€ï¼"
echo ""

# æ¸…ç†
echo "ğŸ§¹ æ¸…ç†æµ‹è¯•ç¯å¢ƒ..."
rm -rf .venv-pip .venv-uv

echo "âœ… æ¼”ç¤ºå®Œæˆï¼"
echo ""
echo "ğŸ’¡ æç¤ºï¼šåœ¨å®é™…å¼€å‘ä¸­ä½¿ç”¨ 'make setup' æ¥è®¾ç½®ç¯å¢ƒ"
